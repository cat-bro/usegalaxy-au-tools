# This is a basic workflow to help you get started with Actions

name: CI

# # Controls when the action will run. Triggers the workflow on push or pull request
# # events but only for the master branch
on:
  pull_request:
    branches: [ master ]

# # A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
    - uses: actions/checkout@v1
      with:
        ref: ${{ github.event.pull_request.head.ref }}
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v2
      with:
        python-version: 3.5
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pyyaml bioblend
        # if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    # Run check files script
    - name: Dump PR context
      env:
        GITHUB_CONTEXT: ${{ toJson(github.event.pull_request) }}
      run: echo "$GITHUB_CONTEXT"
    - name: Run script to check request files
      env:
        PULL_REQUEST_BASE: ${{ github.event.pull_request.base.sha }}
        TARGET_BRANCH: origin/master
        PULL_REQUEST_HEAD: ${{ github.event.pull_request.head.sha }}
      run: bash .travis/travis.sh

# jobs:
#   build:
# 
#     runs-on: ubuntu-latest
#     # strategy:
#     #   matrix:
#     #     python-version: [3.7]
# 
#     steps:
#     - uses: actions/checkout@v2
#     - name: Dump GitHub context
#       env:
#         GITHUB_CONTEXT: ${{ toJson(github) }}
#       run: echo "$GITHUB_CONTEXT"
    # 
    # - name: Set up Python ${{ matrix.python-version }}
    #   uses: actions/setup-python@v2
    #   with:
    #     python-version: 3.5
    # - name: Install dependencies
    #   run: |
    #     python -m pip install --upgrade pip
    #     pip install pyyaml bioblend
    #     if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    # - name: Run check files script
    #   run: |
    #     p
